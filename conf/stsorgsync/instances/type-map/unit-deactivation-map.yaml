---
id: 8736bf36-1feb-4723-bd83-cb3872222654
registrations:
  - validity:
      - input:
          class: { id: efefe41d-805b-478f-8e4d-841085cb7dfa, name: Type Map }
          name: Unit -> STSOrgSync Unit (Deactivation)
          sourceType: { id: 5cad9972-6560-4136-a9d5-40c2d109be9b, name: Unit }
          targetType: { id: 5c71d76c-9c97-4365-ade6-4bb0add4546f, name: STSOrgSync Unit }
          idSeed: id
          condition:
            # This is the only case we need to handle, as other units are
            # deactivated as appropriate by the other Unit type map
            type: mustProduceValue
            mapping: excludeFromStsOrg
          warmUps:
            units: { relatesTo: { class: 5cad9972-6560-4136-a9d5-40c2d109be9b } }
          mappings:
            excludeFromStsOrg:
              sourceAttribute:
                - type: findAncestor
                  selfIfNotFound: false
                  parentRelation: parents.administrativ
                  condition:
                    type: mustBeTruthy
                    attribute: aggregateSubTree.stsOrg
                - type: path
                  path: [ name ]
              targetAttribute: excludeFromStsOrg
              transform: boolean
            activeTo1:
              sourceAttribute: activeTo
              targetAttribute: activeTo
              condition:
                type: mustExist
                attribute: activeTo
            activeTo2:
              sourceAttribute: activeTo
              targetAttribute: id
              condition:
                type: mustNotExist
                attribute: activeTo
              transform:
                type: constant
                # This value is in the past and is easy to recognize
                value: '1955-12-31T23:59:59.999Z'
        from: 2018-11-01T00:00:00.000Z
...
